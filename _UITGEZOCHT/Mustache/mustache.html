<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></script>
<script src="http://github.com/janl/mustache.js/raw/master/mustache.js"></script>

<script type="text/javascript">
$(function() {
	$(document).ready(function(){
							   
		 
				
				
		$.getJSON("http://test.bitsquad.nl/wordpress/?json=get_recent_posts",function(data){
																					  
			var titlesArr = [];
		 	var urlsArr = [];
																					  
			$.each(data.posts, function(i,data){
										
				//var div_data = "<div><a href='"+data.url+"'>"+data.title+"</a></div><p>"+data.content+"</p>";
				//$(div_data).appendTo("#showjson");
				
				
				
				titlesArr.push(data.title);
				urlsArr.push(data.url);
				
				
				
				/*
				var article = function(spec) {
					var that = {};
					
					that.title = spec.titles;
					that.url = spec.urls;
					
					return that;
				};
				
				var myArticles = article({titles: titlesArr, urls: urlsArr});
				//alert(myArticles);
				console.log(myArticles);
				*/
				
				

			});
			
			// Get template from external file
		
				$.get('templates/shopping-list.html', function(template) {
							
					console.log(titlesArr);
					console.log(urlsArr);
						
					var view = {
						name: "Koens Json uit Wordpress test",
						titlelist: titlesArr,
						urllist: urlsArr
					}
					
					var html = Mustache.to_html(template, view);
					$("#showjson").html(html);
					
				});

		}
		
		);
		
		

	});
});



</script>

</head>

<body>



<div id="showjson"></div>

</body>
</html>
